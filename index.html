<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <!-- <link rel="manifest" href="manifest.json" /> -->
    <link rel="apple-touch-icon" href="152.png" />
    <link rel="apple-touch-icon" href="180.png" />
    <link rel="apple-touch-icon" href="192-2.png" />
    <link rel="apple-touch-icon" href="512.png" />
    <link rel="apple-touch-icon" href="1024.png" />
    <meta name="apple-mobile-web-app-status-bar" content="#db4938" />
    <meta name="theme-color" content="#145E30" />
    <script>
      if ("serviceWorker" in navigator) {
        window.addEventListener("load", function() {
          navigator.serviceWorker
            .register("serviceWorker.js")
            .then(res => console.log("service worker registered"))
            .catch(err => console.log("service worker not registered", err))
        })
      }
    </script>
    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="css/bootstrap.min.css" />
  </head>

  <body>

    <div class="container">
      
      <div id="assignPage" class="d-block">
        <br />
        <br />
        <br />
        <div class="form-group">
          <label for="assignK" class="form-label" style="font-size: 30px"
            >Assign Scout:</label
          >
          <textarea
            name="assignK"
            class="form-control"
            id="assignBox"
            rows="2"
            placeholder="Enter alliance/driver station"
          ></textarea>
        </div>

        <a
          id="homePageLink"
          style="font-size: 25px"
          class="btn btn-success btn-block p-3 text-white"
        >
          Confirm
        </a>
      </div>
          
          <div id="homePage" class="d-none">
            <h1 class="display-4 mt-5 mb-5">Welcome Scout</h1>
            <h3 id="titleAssign" class="display-6 mt-5 mb-5"></h3>
            <a
              id="matchLink"
              style="font-size: 30px"
              class="btn btn-success btn-block p-4 text-white"
            >
              Scout a Match
            </a>
            <br />
            <a
              id="pitLink"
              style="font-size: 30px"
              class="btn btn-success btn-block p-4 text-white"
            >
              Create Pit Report
            </a>
            <br />
            <hr />
            <p>
              <a
                class="btn btn-success btn-block p-3 text-white"
                style="font-size: 25px"
                data-toggle="collapse"
                href="#collapseExample"
                role="button"
                aria-expanded="false"
                aria-controls="collapseExample"
              >
                How to Scout
              </a>
            </p>
            <div class="collapse" id="collapseExample">
              <div class="card card-body">
                <p>
                  Check that the match number and team are correct (can be changed
                  if an error is found) <br/>
      
                  To begin, input your name and verify that the match number and 
                  team identity are correct. Once you have confirmed this information,
                  proceed. <br/>
                  
                  For the autonomous section of the match, confirm that the
                  auto option is selected. Focusing on the robot you are assigned, click 
                  either the cone or the cube as it picks one up and click on where it places
                  the cone/cube if it is successful. If it drops the cone/cube, press the drop
                  button and it will be recorded. When the robot attempts to balance, pressing
                  the center of the balance will indicate success, and pressing either side will
                  indicate that it is unbalanced. If at any point you misclick, you can click error
                  and then click the mistake to fix it. When the autonomous section is over, it
                  is important to switch from the auto button to the tele-op button. <br/>

                  Record how well the robot played defense, if at all. This could include blocking
                  another robot from scoring or preventing another robot from picking up a cone/cube. <br/>

                  Record any other notes about the performance of the robot in the provided space
                  below the field diagram. It would be helpful to include information on how quickly
                  the robot picked up cones/cubes, how long it took for it to score once picking them
                  up, how well the robot adjusted to balance, etc. It is important to note also
                  that some robots will be pre-loaded with cones/cubes, and to factor this
                  in when observing scoring with obstacles you may not have observed being picked up. <br/>

                  When you have completed the above steps, create a QR code to share with the
                  head scout. <br/>
                </p>
              </div>
            </div>
            <hr />
            <br />
            <br />
            <!-- <a
              id="metaLink"
              style="font-size: 25px"
              class="btn btn-success btn-block p-3 text-white"
            >
              View MetaData
            </a>
            <br /> -->
            <a
              id="reassignLink"
              style="font-size: 25px"
              class="btn btn-success btn-block p-3 text-white"
            >
              Reassign Alliance
            </a>
            <br />
            <a
            id="captureLink"
            style="font-size: 25px"
            class="btn btn-success btn-block p-3 text-white"
          >
            Capture Data from QR
          </a>
          <br />
          </div>

          <div id="metaPage" class="d-none">
            <br />
            <h2 id="metaTitle"></h2>
            <br />
            <h3>Matches Scouted:</h3>
            <p id="matchesScoutedDiv"></p>
            <h3>High Score:</h3>
            <p id="highScoreDiv"></p>
            <br />
            <h3>Matches Missed:</h3>
            <p id="matchesMissedDiv"></p>
            <br />
            <button
              id="homeButton5"
              type="submit"
              class="btn btn-outline-success btn-block mt-3 mb-3 homeClick p-3"
            >
              Go Home
            </button>
          </div>

          <div id="matchReportPage" class="d-none">
            <div id="match-the-section-with-questions">
              <button
                id="homeButton3"
                type="submit"
                class="btn btn-outline-success btn-block mt-3 mb-3 homeClick p-3"
              >
                Go Home
              </button>
              <a id="top"></a>
              <h1 class="display-4">District Competition<br />Revere MA</h1>
              <h1 class="display-5">Match Scouting</h1>
              <form>
                <div class="form-group">
                  <label for="match-scoutBox" class="col-form-label">Scout:</label>
                  <input
                    class="form-control"
                    id="match-scoutBox"
                    type="text"
                    placeholder="Enter scout name"
                  />
                </div>
                <div class="form-group">
                  <label for="matchBox" class="col-form-label">Match Number:</label>
                  <input
                    class="form-control"
                    id="matchBox"
                    type="text"
                    placeholder="Please enter ONLY an integer"
                  />
                </div>
                <div id="teamBoxDiv" class="form-group">
                  <label for="teamBox" class="form-label">Team</label>
                  <span id="teamsWarningSpan" class="invisible text-danger"></span>
                  <select id="teamBox" class="form-control">
                    <option value="0" hidden disabled selected>
                      Choose one ...
                    </option>
                  </select>
                </div>
                <div id="verifyStuff" class="d-block">
                  <br />
                  <h4>Please verify the above data before moving on :)</h4>
                  <br />
                  <button
                    id="verifyDataButton"
                    type="submit"
                    class="btn btn-outline-success btn-block p-3"
                  >
                    Continue
                  </button>
                </div>
    
                <div id="actualReport" class="d-none">
                  <div class="tab-content pt-2 pl-1" id="pills-tabContent">
                    <div id="score">
                      <h1 class="display-5">Scoring Table</h1>
                      <div id="drawing"></div>
                    </div>
                  </div>
    
                  <div class="form-group">
                    <label class="form-label">Defense(if played):</label><br />
                    <div class="btn-group-toggle" data-toggle="buttons">
                      <label class="btn btn-outline-primary aggression">
                        <input
                          type="checkbox"
                          name="aggression_checkbox"
                          value="1"
                        />
                        Unsuccessful
                      </label>
                      <label class="btn btn-outline-primary aggression">
                        <input
                          type="checkbox"
                          name="aggression_checkbox"
                          value="2"
                        />
                        Average
                      </label>
                      <label class="btn btn-outline-primary aggression">
                        <input
                          type="checkbox"
                          name="aggression_checkbox"
                          value="4"
                        />
                        Successful
                      </label>
                      <label class="btn btn-outline-primary aggression">
                        <input
                          type="checkbox"
                          name="aggression_checkbox"
                          value="8"
                        />
                        Very Successful
                      </label>
                      <label class="btn btn-outline-primary aggression">
                        <input
                          type="checkbox"
                          name="aggression_checkbox"
                          value="16"
                        />
                        Extreme(flag)
                      </label>
                    </div>
                  </div>
    
                  <div class="form-group">
                    <label for="exampleFormControlTextarea1" class="form-label"
                      >Extra Notes:</label
                    >
                    <textarea
                      class="form-control"
                      id="match-notesBox"
                      rows="2"
                      placeholder="Mention cycle time, climb involvement, etc"
                    ></textarea>
                  </div>
    
                  <button
                    id="match-createQr"
                    type="submit"
                    class="btn btn-outline-success btn-block p-3"
                    href="#top"
                  >
                    Create QR Code
                  </button>
                  <br/>
                   <button
                    id="match-resetFormButton"
                    type="button"
                    class="btn btn-outline-success btn-block p-3"
                  >
                    Reset Report(will not increment match num)
                  </button>
                  <br />
                </div>
              </form>
            </div>
          </div>

          <div id="pitReportPage" class="d-none">
            <!--       <div class="d-flex flex-row-reverse">
            <div class="p-2 font-weight-light font-italic">not logged in</div>
          </div> -->
            <!--       <div id="home-div">
            <a href="/" class="btn btn-outline-danger btn-block mt-3 mb-3">
              Go Home
            </a>
          </div> -->
            <div id="pit-the-section-with-questions">
              <div id="home-div">
                <button
                  id="homeButton1"
                  type="submit"
                  class="btn btn-outline-success btn-block mt-3 mb-3 homeClick p-3"
                >
                  Go Home
                </button>
              </div>
              <h1 class="display-4">Pit Scouting Form</h1>
              <form>
                <div class="form-group">
                  <label for="numBox" class="form-label">Team</label>
                  <select id="numBox" class="form-control">
                    <option value="0" selected disabled hidden>
                      Choose one ...
                    </option>
                  </select>
                </div>
                <div class="form-group">
                  <label for="pit-scoutBox" class="col-form-label">Scout:</label>
                  <input
                    class="form-control"
                    id="pit-scoutBox"
                    type="text"
                    placeholder="Enter scout name"
                  />
                </div>
                <div class="form-group">
                  <label for="weight" class="col-form-label">Robot Weight</label>
                  <input
                    class="form-control"
                    id="weightBox"
                    type="text"
                    placeholder="Please enter ONLY an integer"
                  />
                </div>

                <div class="form-group">
                  <label class="form-label">Piece Handling</label><br />
                  <div class="btn-group-toggle" data-toggle="buttons">
                    <label class="btn btn-outline-primary pieces">
                      <input
                        type="checkbox"
                        name="piece_ability_checkbox"
                        value="1"
                      />
                      Cube
                    </label>
                    <label class="btn btn-outline-primary pieces">
                      <input
                        type="checkbox"
                        name="piece_ability_checkbox"
                        value="2"
                      />
                      Cone
                    </label>
                  </div>
                </div>


                <div class="form-group">
                  <label class="form-label">Grid Height</label><br />
                  <div class="btn-group-toggle" data-toggle="buttons">
                    <label class="btn btn-outline-primary gridHeight">
                      <input
                        type="checkbox"
                        name="grid_height_checkbox"
                        id="grid1"
                        value="1"
                      />
                      Floor
                    </label>
                    <label class="btn btn-outline-primary gridHeight">
                      <input
                        type="checkbox"
                        name="grid_height_checkbox"
                        id="grid2"
                        value="2"
                      />
                      Middle
                    </label>
                    <label class="btn btn-outline-primary gridHeight">
                      <input
                        type="checkbox"
                        name="grid_height_checkbox"
                        id="grid3"
                        value="4"
                      />
                      Top
                    </label>
                  </div>
                </div>

                <div class="form-group">
                  <label class="form-label">Charging Station</label><br />
                  <div class="btn-group btn-group-toggle" data-toggle="buttons">
                    <label class="btn btn-outline-primary charge">
                      <input type="radio" name="charge_radio" value="1" />
                      No Balance
                    </label>
                    <label class="btn btn-outline-primary charge">
                      <input type="radio" name="charge_radio" value="2" />
                      Manual Balance
                    </label>
                    <label class="btn btn-outline-primary charge">
                      <input type="radio" name="charge_radio" value="4" />
                      Automatic Balance
                    </label>
                  </div>
                </div>
    
                <div class="form-group">
                  <label class="form-label">Drive Train</label><br />
                  <div class="btn-group btn-group-toggle" data-toggle="buttons">
                    <label class="btn btn-outline-primary driveTrain">
                      <input
                        type="radio"
                        name="drive_train_radio"
                        id="drive1"
                        value="1"
                      />
                      Tank(regular)
                    </label>
                    <label class="btn btn-outline-primary driveTrain">
                      <input
                        type="radio"
                        name="drive_train_radio"
                        id="drive2"
                        value="2"
                      />
                      Mecanum
                    </label>
                    <label class="btn btn-outline-primary driveTrain">
                      <input
                        type="radio"
                        name="drive_train_radio"
                        id="drive3"
                        value="4"
                      />
                      Omni assist
                    </label>
                    <label class="btn btn-outline-primary driveTrain">
                      <input
                        type="radio"
                        name="drive_train_radio"
                        id="drive4"
                        value="8"
                      />
                      Swerve
                    </label>
                  </div>
                </div>

                <div class="form-group">
                  <label for="autoPath" class="col-form-label">Auto Paths:</label>
                  <input
                    class="form-control"
                    id="autoPathBox"
                    type="text"
                    placeholder="Please roughly describe auto paths if applicable"
                  />
                </div>

                <div class="form-group">
                  <label for="driveHours" class="col-form-label">Drive Hours:</label>
                  <input
                    class="form-control"
                    id="driveHoursBox"
                    type="text"
                    placeholder="If any, please enter the INTEGER number of hours of drive practice - other comps DO count"
                  />
                </div>
    
                <div class="form-group">
                  <label for="exampleFormControlTextarea1" class="form-label"
                    >Extra Notes:</label
                  >
                  <textarea class="form-control" id="notesBox" rows="2" placeholder="Mention difference in piece ability is applicable"></textarea>
                </div>
    
                <button
                  id="createQr"
                  type="submit"
                  class="btn btn-outline-success btn-block p-3"
                  data-toggle="modal"
                  data-target="#pitModal"
                >
                  Create QR Code
                </button>
    
                <br />
              </form>
            </div>
          </div>

          <div id="captureQrDataPage" class="d-none">
            <br />
            <h2 id="captureTitle"></h2>
            <div class="select">
              <label for="captureVideoSource">Video source: </label><select id="captureVideoSource"></select>
            </div>
      
          <video autoplay playsinline class="hidden" id="captureVideo"></video>
          <img id="captureImg">
          <canvas class="hidden" id="captureCanvas"></canvas>
            <button
              id="homeButton5"
              type="submit"
              class="btn btn-outline-success btn-block mt-3 mb-3 homeClick p-3"
            >
              Go Home
            </button>
          </div>


          <div
          class="modal fade"
          id="matchModal"
          tabindex="-1"
          role="dialog"
          aria-labelledby="matchModalLabel"
          aria-hidden="true"
          data-backdrop="static"
        >
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="matchModalLabel">QR data for</h5>
                <button
                  type="button"
                  class="close"
                  data-dismiss="modal"
                  aria-label="Close"
                >
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body">
                <div id="match-qrcode" class="mx-auto"></div>
                <br />
              </div>
              <div class="modal-footer">
                <div id="endButtons" class="invisible">
                  <button
                    type="button"
                    class="btn btn-outline-success p-3"
                    data-dismiss="modal"
                  >
                    Cancel
                  </button>
                  <button
                    id="match-clearFormButton"
                    type="button"
                    class="btn btn-outline-success p-3 upMatch"
                    data-dismiss="modal"
                  >
                    Create Another Match Report
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>

          <div
          class="modal fade"
          id="pitModal"
          tabindex="-1"
          role="dialog"
          aria-labelledby="pitModalLabel"
          aria-hidden="true"
          data-backdrop="static"
        >
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="pitModalLabel"></h5>
                <button
                  type="button"
                  class="close"
                  data-dismiss="modal"
                  aria-label="Close"
                >
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body">
                <div id="qrcode" class="mx-auto"></div>
                <br />
              </div>
              <div class="modal-footer">
                <div id="endStuff" class="d-none">
                  <button
                    type="button"
                    class="btn btn-outline-success closePitModal p-3"
                  >
                    Cancel
                  </button>
                  <button
                    id="clearFormButton"
                    type="button"
                    class="btn btn-outline-success p-3 closePitModal"
                  >
                    Create Another Pit Report
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>

    </div>

    <script src="js/jquery-3.4.1.min.js"></script>
    <script src="js/popper.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/qrcode.min.js"></script>
    <script src="js/qr-creator.js"></script>
    <script src="js/p5.min.js"></script>
    <script src="app.js"></script>
  </body>
</html>
